Package nisse;

Helpers
       charv1    = ['a' .. 'z'] | ['A' .. 'Z'] ;
       digitv1   = ['0' .. '9'] ;
       dot         = '.' ;
       comma       = ',' ;

Tokens

       format_kwd  = '@u' | '@b' | '@i' | '@apply' ;
       space       =  ' ' ;
       settingkwd  = '@setting' ;
       beginkwd    = '@begin' ;
       endkwd      = '@end' ;
       atsign      = '@' ;
       lcurly      = '{' ;
       rcurly      = '}' ;
       pipe        = '|' ;
       fslash      = '/' ;
       bslash      = '\' ;
       colon       = ':' ;
       scolon      = ';' ;
       blist       = '*' ;
       nlist       = '#' ;
       percent     = '%' ;
       eol         = 13 10 | 13 | 10;
       char        = charv1+ ;
       digit       = digitv1+ ;
       morechar    = ( dot | comma )+ ;

Productions 

       nisse         = blocks* ;
       blocks        = {block} beginblock lines* endblock 
                     | {setting} settingblock ;
       lines         = {setting} settingblock 
                     | {numeration} numeration
                     | {itemlist} itemlist 
                     | {plaintext} plains eol ;
       numeration    = nlist numerationv1 ;
       numerationv1  = {plaintext} plains eol 
                     | {numeration} numeration;
       itemlist      = blist itemlistv1 ;
       itemlistv1    = {plaintext} plains eol  
                     | {itemlist} itemlist;
       beginblock    = beginkwd beblock eol ;
       endblock      = endkwd beblock eol+ ;
       beblock       = lcurly [first]:space* char [second]:space* beblockv1? rcurly ;
       beblockv1     = pipe char space*;
       settingblock  = settingkwd lcurly shortident [first]:space* pipe [second]:space* char [third]:space* rcurly eol;
       plains        = plainsv1+;
       plainsv1      = {shortblock} shortblock 
                     | {charall} charall;
       shortblock    = format_kwd lcurly space* shortidents? plains rcurly ;
       shortidents   = shortident+ pipe ;
       shortident    = kwd space* colon [first]:space* shortidentv1 [second]:space* ;
       shortidentv1  = {char} char 
                     | {digit} digit;
       kwd           = atsign char ;
       charall       = {colon} colon 
                     | {digit} digit 
                     | {semicolon} scolon 
                     | {percent} percent 
                     | {forwardslash} fslash 
                     | {backslash} bslash 
                     | {morechar} morechar 
                     | {char} char
                     | {space} morespace ;
       morespace     = space* ;